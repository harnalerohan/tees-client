(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{20:function(e,t,c){},49:function(e,t,c){"use strict";c.r(t);var n=c(1),s=c.n(n),a=c(4),r=c(5),o=c(3),i=(c(20),"https://t-shirtmern.herokuapp.com/api/"),l={signup:function(e){return console.log(localStorage),fetch("".concat(i,"/signup"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},signin:function(e){return fetch("".concat(i,"/signin"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).catch(console.log("Error"))},authenticate:function(e,t){"undefined"!==typeof window&&localStorage.setItem("jwt",JSON.stringify(e)),t()},signout:function(e){if("undefined"!==typeof window)return localStorage.removeItem("jwt"),e(),fetch("".concat(i,"/signout"),{method:"GET"}).then((function(e){console.log("Signout success")})).catch((function(e){return console.log(e)}))},isAuthenticated:function(){return"undefined"!=typeof window&&(!!localStorage.getItem("jwt")&&JSON.parse(localStorage.getItem("jwt")))}},d=c(0),j=function(e,t){return e.location.pathname===t?{color:"#2ecc72"}:{color:"#FFFFFF"}},u=Object(r.h)((function(e){var t=e.history;return Object(d.jsx)("div",{children:Object(d.jsxs)("ul",{className:"nav nav-tabs bg-dark",children:[Object(d.jsx)("li",{className:"nav-item",children:Object(d.jsx)(a.b,{style:j(t,"/"),className:"nav-link",to:"/",children:"Home"})}),Object(d.jsx)("li",{className:"nav-item",children:Object(d.jsx)(a.b,{style:j(t,"/cart"),className:"nav-link",to:"/cart",children:"Cart"})}),l.isAuthenticated()&&0===l.isAuthenticated().user.role&&Object(d.jsx)("li",{className:"nav-item",children:Object(d.jsx)(a.b,{style:j(t,"/user/dashboard"),className:"nav-link",to:"/user/dashboard",children:"U. Dashboard"})}),l.isAuthenticated()&&1===l.isAuthenticated().user.role&&Object(d.jsx)("li",{className:"nav-item",children:Object(d.jsx)(a.b,{style:j(t,"/admin/dashboard"),className:"nav-link",to:"/admin/dashboard",children:"A. Dashboard"})}),!l.isAuthenticated()&&Object(d.jsxs)(s.a.Fragment,{children:[Object(d.jsx)("li",{className:"nav-item",children:Object(d.jsx)(a.b,{style:j(t,"/signup"),className:"nav-link",to:"/signup",children:"Sign Up"})}),Object(d.jsx)("li",{className:"nav-item",children:Object(d.jsx)(a.b,{style:j(t,"/signin"),className:"nav-link",to:"/signin",children:"Sign In"})})]}),l.isAuthenticated()&&Object(d.jsx)("li",{className:"nav-item",children:Object(d.jsx)("span",{className:"nav-link text-warning",onClick:function(){l.signout((function(){t.push("/")}))},children:"Signout"})})]})})})),b=function(e){var t=e.title,c=void 0===t?"My Title":t,n=e.description,s=void 0===n?"My description":n,a=e.className,r=void 0===a?"custom bg-dark text-white p-4 pb-6":a,o=e.children;return Object(d.jsxs)("div",{children:[Object(d.jsx)(u,{}),Object(d.jsxs)("div",{className:"container-fluid",children:[Object(d.jsxs)("div",{className:"jumbotron bg-dark text-white text-center pb-3 pt-5",children:[Object(d.jsx)("h2",{className:"display-5",children:c}),Object(d.jsx)("p",{className:"lead",children:s})]}),Object(d.jsx)("div",{className:r,children:o})]}),Object(d.jsxs)("footer",{className:"footer bg-dark mt-auto py-3",children:[Object(d.jsxs)("div",{className:"container-fluid bg-success text-white text-center py-3",children:[Object(d.jsx)("h4",{children:"If You got any questions, feel free to reach out!"}),Object(d.jsx)("button",{className:"btn btn-warning btn-lg",children:"Contact Us"})]}),Object(d.jsx)("div",{className:"container",children:Object(d.jsxs)("span",{className:"text-muted",children:["App created with",Object(d.jsx)("span",{className:"text-white",children:" React "}),"By ",Object(d.jsx)("span",{className:"text-white",children:" Rohan "})]})})]})]})},h=c(2),m=function(e){var t=[];return void 0!==typeof window&&(localStorage.getItem("cart")&&(t=JSON.parse(localStorage.getItem("cart"))),t.map((function(c,n){c._id===e&&t.splice(n,1)})),localStorage.setItem("cart",JSON.stringify(t))),t},O=function(e){var t=e.product,c=t?"".concat(i,"/product/photo/").concat(t._id):"https://redecormyhome.com/wp-content/uploads/2020/06/imageedit_3_8132980001.png";return Object(d.jsx)("div",{className:"rounded border border-success p-2",children:Object(d.jsx)("img",{src:c,alt:"photo",style:{maxHeight:"100%",maxWidth:"100%"},className:"mb-3 rounded"})})},x=function(e){var t=e.isAddToCart,c=void 0===t||t,s=e.isRemoveFromCart,a=void 0!==s&&s,r=e.product,i=e.setReload,l=void 0===i?function(e){return e}:i,j=e.reload,u=void 0===j?void 0:j,b=e.setAddedToCart,x=void 0===b?function(e){return e}:b,p=Object(n.useState)(r.count),f=Object(o.a)(p,2),g=(f[0],f[1],r?r.name:"A photo from pexels"),N=r?r.description:"A photo from pexels",v=r?r.price:"Default",y=function(){!function(e,t){var c=[];void 0!==typeof window&&(localStorage.getItem("cart")&&(c=JSON.parse(localStorage.getItem("cart"))),c.push(Object(h.a)(Object(h.a)({},e),{},{count:1})),localStorage.setItem("cart",JSON.stringify(c)),t())}(r,(function(){x(!0)}))};m((function(e){console.log("Hello")}));return Object(d.jsxs)("div",{className:"card text-white bg-dark border border-info ",children:[Object(d.jsx)("div",{className:"card-header lead",children:g}),Object(d.jsxs)("div",{className:"card-body",children:[Object(d.jsx)(O,{product:r}),Object(d.jsx)("p",{className:"lead bg-success font-weight-normal text-wrap",children:N}),Object(d.jsxs)("p",{className:"btn btn-success rounded  btn-sm px-4",children:["$ ",v]}),Object(d.jsxs)("div",{className:"row",children:[c?Object(d.jsx)("div",{className:"col-12",children:Object(d.jsx)("button",{onClick:y,className:"btn btn-block btn-outline-success mt-2 mb-2",children:"Add to Cart"})}):"",a?Object(d.jsx)("div",{className:"col-12",children:Object(d.jsx)("button",{onClick:function(){m(r._id),l(!u)},className:"btn btn-block btn-outline-danger mt-2 mb-2",children:"Remove from cart"})}):""]})]})]})},p=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),c=t[0],s=t[1],a=Object(n.useState)(!1),r=Object(o.a)(a,2),l=(r[0],r[1]),j=Object(n.useState)(!1),u=Object(o.a)(j,2),h=u[0],m=u[1],O=function(){fetch("".concat(i,"/products"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)})).then((function(e){e.error?l(e.error):s(e)})).catch((function(e){console.log(e)}))};return Object(n.useEffect)((function(){O()}),[]),Object(d.jsxs)(b,{title:"Home Page",description:"Welcome to the t-shirt store",children:[function(){if(h)return Object(d.jsx)("div",{className:"alert alert-info",children:Object(d.jsx)("h2",{children:"Item added to cart"})})}(),Object(d.jsxs)("div",{className:"row text-center",children:[Object(d.jsx)("h1",{className:"text-white",children:"All of the t-shirts"}),Object(d.jsx)("div",{className:"row",children:c.map((function(e,t){return Object(d.jsx)("div",{className:"col-md-4 mb-4",children:Object(d.jsx)(x,{addToCart:"true",product:e,setAddedToCart:m})},t)}))}),console.log(c)]})]})},f=c(10),g=function(){var e=Object(n.useState)({name:"",email:"",password:"",error:"",success:!1}),t=Object(o.a)(e,2),c=t[0],s=t[1],r=c.name,i=c.email,j=c.password,u=c.error,m=c.success,O=function(e){return function(t){s(Object(h.a)(Object(h.a)({},c),{},Object(f.a)({error:!1},e,t.target.value)))}},x=function(e){e.preventDefault(),s(Object(h.a)(Object(h.a)({},c),{},{error:!1})),l.signup({name:r,email:i,password:j}).then((function(e){e.error?(console.log(e),s(Object(h.a)(Object(h.a)({},c),{},{error:e.Error,success:!1}))):s(Object(h.a)(Object(h.a)({},c),{},{name:"",email:"",password:"",error:"",success:!0}))})).catch((function(e){console.log(e),s(Object(h.a)(Object(h.a)({},c),{},{error:"cannot reach server - 404",success:!1}))}))};return Object(d.jsxs)(b,{title:"Sign up page",description:"A page for user to sign up",children:[Object(d.jsx)("div",{className:"row",children:Object(d.jsx)("div",{className:"col-md-6 offset-sm-3 text-left",children:Object(d.jsxs)("div",{className:"alert alert-success",style:{display:m?"":"none"},children:["New Account was created succesfully. Please login",Object(d.jsx)(a.b,{to:"/signin",children:" here"})]})})}),Object(d.jsx)("div",{className:"row",children:Object(d.jsx)("div",{className:"col-md-6 offset-sm-3 text-left",children:Object(d.jsxs)("div",{className:"alert alert-danger",style:{display:u?"":"none"},children:["User registration failed, with error ",u,"."]})})}),Object(d.jsx)("div",{className:"row",children:Object(d.jsx)("div",{className:"col-md-6 offset-sm-3 text-left",children:Object(d.jsxs)("form",{action:"",children:[Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{className:"text-light form-label",children:"Name"}),Object(d.jsx)("input",{value:r,className:"form-control",onChange:O("name"),type:"text"})]}),Object(d.jsxs)("div",{className:"form-group mt-3",children:[Object(d.jsx)("label",{className:"text-light form-label",children:"Email"}),Object(d.jsx)("input",{value:i,className:"form-control",onChange:O("email"),type:"email"})]}),Object(d.jsxs)("div",{className:"form-group mt-3",children:[Object(d.jsx)("label",{className:"text-light form-label",children:"Password"}),Object(d.jsx)("input",{value:j,className:"form-control",onChange:O("password"),type:"password"})]}),Object(d.jsx)("button",{onClick:x,className:"btn btn-success col-12 mt-4",children:"Submit"})]})})}),Object(d.jsx)("p",{className:"text-white text-center",children:JSON.stringify(c)})]})},N=function(){var e=Object(n.useState)({email:"therohan@gmail.com",password:"123456",error:"",loading:!1,didRedirect:!1}),t=Object(o.a)(e,2),c=t[0],s=t[1],a=c.email,i=c.password,j=c.error,u=c.loading,m=c.didRedirect,O=l.isAuthenticated().user,x=function(e){return function(t){s(Object(h.a)(Object(h.a)({},c),{},Object(f.a)({error:!1},e,t.target.value)))}},p=function(e){e.preventDefault(),s(Object(h.a)(Object(h.a)({},c),{},{error:!1,loading:!0})),l.signin({email:a,password:i}).then((function(e){console.log(e.error),e.error?s(Object(h.a)(Object(h.a)({},c),{},{error:e.error,loading:!1})):l.authenticate(e,(function(){console.log(e),s(Object(h.a)(Object(h.a)({},c),{},{didRedirect:!0}))}))})).catch((function(e){s(Object(h.a)(Object(h.a)({},c),{},{loading:!1,error:"Cannot reach to server - 404"})),console.log(e)}))};return Object(d.jsxs)(b,{title:"Sign In Page",description:"A page for user to sign In",children:[u&&Object(d.jsx)("div",{className:"alert alert-info",children:Object(d.jsx)("h2",{children:"Loading....."})}),Object(d.jsx)("div",{className:"row",children:Object(d.jsx)("div",{className:"col-md-6 offset-sm-3 text-left",children:Object(d.jsxs)("div",{className:"alert alert-danger",style:{display:j?"":"none"},children:[j,"."]})})}),Object(d.jsx)("div",{className:"row",children:Object(d.jsx)("div",{className:"col-md-6 offset-sm-3 text-left",children:Object(d.jsxs)("form",{action:"",children:[Object(d.jsxs)("div",{className:"form-group mt-3",children:[Object(d.jsx)("label",{className:"text-light form-label",children:"Email"}),Object(d.jsx)("input",{value:a,onChange:x("email"),className:"form-control",type:"email"})]}),Object(d.jsxs)("div",{className:"form-group mt-3",children:[Object(d.jsx)("label",{className:"text-light form-label",children:"Password"}),Object(d.jsx)("input",{value:i,onChange:x("password"),className:"form-control",type:"password"})]}),Object(d.jsx)("button",{onClick:p,className:"btn btn-success col-12 mt-4",children:"Submit"})]})})}),m?O&&1===O.role?Object(d.jsx)(r.a,{to:"/admin/dashboard"}):Object(d.jsx)(r.a,{to:"/user/dashboard"}):l.isAuthenticated()?Object(d.jsx)(r.a,{to:"/"}):void 0]})},v=c(13),y=function(e){var t=e.component,c=Object(v.a)(e,["component"]);return Object(d.jsx)(r.b,Object(h.a)(Object(h.a)({},c),{},{render:function(e){return l.isAuthenticated()&&1===l.isAuthenticated().user.role?Object(d.jsx)(t,Object(h.a)({},e)):Object(d.jsx)(r.a,{to:{pathname:"/signin",state:{from:e.location}}})}}))},k=function(e){var t=e.component,c=Object(v.a)(e,["component"]);return Object(d.jsx)(r.b,Object(h.a)(Object(h.a)({},c),{},{render:function(e){return l.isAuthenticated()?Object(d.jsx)(t,Object(h.a)({},e)):Object(d.jsx)(r.a,{to:{pathname:"/signin",state:{from:e.location}}})}}))},w=function(){var e=l.isAuthenticated(),t=e.user,c=e.token,s=Object(n.useState)([]),a=Object(o.a)(s,2),r=a[0],j=a[1],u=Object(n.useState)(""),h=Object(o.a)(u,2),m=h[0],O=h[1],x=function(){(function(e,t){return fetch("".concat(i,"/orders/user/").concat(e),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))})(t._id,c).then((function(e){e.error?O(m):j(e)})).catch((function(e){console.log(e)}))};Object(n.useEffect)((function(){x()}),[]);return Object(d.jsxs)(b,{title:"Hello "+t.name,description:"This is where you can manage your profile and orders",children:[Object(d.jsx)("div",{children:Object(d.jsxs)("div",{className:"card",children:[Object(d.jsx)("h5",{className:"card-header text-dark",children:"Your Dashboard"}),Object(d.jsxs)("ul",{className:"list-group",children:[Object(d.jsx)("li",{className:"list-group-item",children:Object(d.jsxs)("h5",{className:"text-dark",children:["First Name: ",t.name]})}),Object(d.jsx)("li",{className:"list-group-item",children:Object(d.jsxs)("h5",{className:"text-dark",children:["User Id: ",t._id]})}),Object(d.jsx)("li",{className:"list-group-item",children:Object(d.jsxs)("h5",{className:"text-dark",children:["Email: ",t.email]})}),Object(d.jsx)("li",{className:"list-group-item",children:Object(d.jsxs)("h5",{className:"text-dark",children:["Contact: ",t.contact]})})]})]})}),Object(d.jsx)("div",{className:"mt-3",children:0!==r.length?r.map((function(e,t){return Object(d.jsxs)("div",{className:"card",children:[Object(d.jsx)("h5",{className:"card-header text-dark",children:"Your Orders"}),Object(d.jsx)("ul",{className:"list-group",children:Object(d.jsxs)("div",{className:"row",children:[Object(d.jsxs)("div",{className:"col-md-6",children:[Object(d.jsx)("li",{className:"list-group-item bg-info",children:Object(d.jsxs)("h5",{className:"text-dark",children:["Order Id: ",e._id]})}),Object(d.jsx)("li",{className:"list-group-item",children:Object(d.jsxs)("h5",{className:"text-dark",children:["Payment Status: ",e.status]})}),Object(d.jsx)("li",{className:"list-group-item",children:Object(d.jsxs)("h5",{className:"text-dark",children:["Order Placed on: ",e.createdAt]})}),Object(d.jsx)("li",{className:"list-group-item",children:Object(d.jsxs)("h5",{className:"text-dark",children:["Contact: ",e.contact]})}),Object(d.jsx)("li",{className:"list-group-item",children:Object(d.jsxs)("h5",{className:"text-dark",children:["Total Bill: ",e.amount]})})]}),Object(d.jsxs)("div",{className:"col-md-6",children:[Object(d.jsx)("li",{className:"list-group-item bg-info",children:Object(d.jsx)("h5",{className:"text-dark",children:"Items:"})}),e.products.map((function(e,t){return Object(d.jsx)("li",{className:"list-group-item",children:Object(d.jsxs)("div",{className:"row",children:[Object(d.jsx)("div",{className:"col-6",children:Object(d.jsx)("h5",{className:"text-dark",children:e.name})}),Object(d.jsx)("div",{className:"col-6",children:Object(d.jsx)("h5",{className:"text-dark",children:e.price})})]})},t)}))]})]})})]},t)})):Object(d.jsx)("h1",{children:"You dont have any orders"})})]})},A=function(){var e=l.isAuthenticated().user,t=e.name,c=e.email;e.role;return Object(d.jsx)(b,{title:"Welcome to admin dashboard",description:"Manage all of your orders here.",className:"container bg-success p-4",children:Object(d.jsxs)("div",{className:"row",children:[Object(d.jsx)("div",{className:"col-3",children:Object(d.jsxs)("div",{className:"card",children:[Object(d.jsx)("h5",{className:"card-header bg-dark text-white",children:"Admin Navigation"}),Object(d.jsxs)("ul",{className:"list-group",children:[Object(d.jsx)("li",{className:"list-group-item",children:Object(d.jsx)(a.b,{to:"/admin/create/category",className:"nav-link text-success",children:"Create Categories"})}),Object(d.jsx)("li",{className:"list-group-item",children:Object(d.jsx)(a.b,{to:"/admin/categories",className:"nav-link text-success",children:"Manage Categories"})}),Object(d.jsx)("li",{className:"list-group-item",children:Object(d.jsx)(a.b,{to:"/admin/create/product",className:"nav-link text-success",children:"Create Product"})}),Object(d.jsx)("li",{className:"list-group-item",children:Object(d.jsx)(a.b,{to:"/admin/products",className:"nav-link text-success",children:"Manage Products"})}),Object(d.jsx)("li",{className:"list-group-item",children:Object(d.jsx)(a.b,{to:"/admin/orders",className:"nav-link text-success",children:"Manage Orders"})})]})]})}),Object(d.jsx)("div",{className:"col-9",children:Object(d.jsxs)("div",{className:"card mb-4",children:[Object(d.jsx)("h4",{className:"card-header",children:"Admin Information"}),Object(d.jsxs)("ul",{className:"list-group",children:[Object(d.jsxs)("li",{className:"list-group-item",children:[Object(d.jsx)("span",{className:"badge bg-success mr-2",children:"Name:"})," ",t]}),Object(d.jsxs)("li",{className:"list-group-item",children:[Object(d.jsx)("span",{className:"badge bg-success mr-2",children:"Email:"})," ",c]}),Object(d.jsx)("li",{className:"list-group-item",children:Object(d.jsx)("span",{className:"badge bg-danger mr-2",children:"Admin Area"})})]})]})})]})})},S=function(){return fetch("".concat(i,"/categories"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},C=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),c=t[0],s=t[1],r=Object(n.useState)(!1),j=Object(o.a)(r,2),u=j[0],h=j[1],m=Object(n.useState)(!1),O=Object(o.a)(m,2),x=O[0],p=O[1],f=l.isAuthenticated(),g=f.user,N=f.token,v=function(e){h(""),s(e.target.value),console.log(c)},y=function(e){e.preventDefault(),h(""),p(!1),function(e,t,c){return fetch("".concat(i,"/category/create/").concat(e),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(c)}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(g._id,N,{name:c}).then((function(e){e.error?h(e.error):(h(""),p(!0),s(""))})).catch((function(e){return console.log(e)}))};return Object(d.jsx)(b,{title:"Create category here",description:"Add new category for t-shirts",className:"container bg-info p-4",children:Object(d.jsx)("div",{className:"row bg-white rounded",children:Object(d.jsxs)("div",{className:"col-md-8 offset-md-2",children:[function(){if(x)return Object(d.jsx)("h4",{className:"text-success",children:"Category created succesfully"})}(),function(){if(u)return Object(d.jsx)("h4",{className:"text-warning",children:"Failed to create category"})}(),Object(d.jsx)("form",{children:Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{className:"lead",children:"Category Name:"}),Object(d.jsx)("input",{value:c,onChange:v,type:"text",autoFocus:!0,required:!0,className:"form-control my-3",placeholder:"For Ex. Summer"}),Object(d.jsx)("button",{className:"btn btn-outline-info text-dark",onClick:y,children:"Create Category"})]})}),Object(d.jsx)("div",{className:"mt-5",children:Object(d.jsx)(a.b,{to:"/admin/dashboard",className:"btn btn-sm btn-success mb-3",children:"Admin Home"})})]})})})},T=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),c=t[0],s=t[1],r=l.isAuthenticated(),j=r.user,u=r.token,h=function(){S().then((function(e){e.error?console.log(e.error):s(e)})).catch((function(e){console.log(e)}))};Object(n.useEffect)((function(){h()}),[]);var m=function(e){(function(e,t,c){return fetch("".concat(i,"/category/").concat(e,"/").concat(c),{method:"DELETE",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(e,u,j._id).then((function(e){e.error?console.log(e.error):h()}))};return Object(d.jsxs)(b,{title:"Welcome admin",description:"Manage products here",children:[Object(d.jsx)("h2",{className:"mb-4",children:"All products:"}),Object(d.jsx)(a.b,{className:"btn btn-info",to:"/admin/dashboard",children:Object(d.jsx)("span",{className:"",children:"Admin Home"})}),Object(d.jsx)("div",{className:"row",children:Object(d.jsxs)("div",{className:"col-12",children:[Object(d.jsxs)("h2",{className:"text-center text-white my-3",children:["Total ",c.length," categories"]}),c.map((function(e,t){return Object(d.jsxs)("div",{className:"row  text-center mb-2 ",children:[Object(d.jsx)("div",{className:"col-4",children:Object(d.jsx)("h3",{className:"text-white text-left",children:e.name})}),Object(d.jsx)("div",{className:"col-4",children:Object(d.jsx)(a.b,{className:"btn btn-success",to:"/admin/category/update/".concat(e._id),children:Object(d.jsx)("span",{className:"",children:"Update"})})}),Object(d.jsx)("div",{className:"col-4",children:Object(d.jsx)("button",{onClick:function(){m(e._id)},className:"btn btn-danger",children:"Delete"})})]},t)}))]})})]})},E=function(){var e=l.isAuthenticated(),t=e.user,c=e.token,s=Object(n.useState)({name:"",description:"",price:"",stock:"",photo:"",categories:[],category:"",loading:!1,error:"",createdProduct:"",getRedirect:!1,formData:""}),r=Object(o.a)(s,2),j=r[0],u=r[1],m=j.name,O=j.description,x=j.price,p=j.stock,g=j.categories,N=(j.category,j.loading,j.error),v=j.createdProduct,y=(j.getRedirect,j.formData);Object(n.useEffect)((function(){S().then((function(e){e.error?u(Object(h.a)(Object(h.a)({},j),{},{error:e.error})):u(Object(h.a)(Object(h.a)({},j),{},{categories:e,formData:new FormData}))})).catch((function(e){console.log(e)}))}),[]);var k=function(e){e.preventDefault(),u(Object(h.a)(Object(h.a)({},j),{},{error:"",loading:!0})),function(e,t,c){return fetch("".concat(i,"/product/create/").concat(e),{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)},body:c}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(t._id,c,y).then((function(e){e.error?u(Object(h.a)(Object(h.a)({},j),{},{error:e.error})):(u(Object(h.a)(Object(h.a)({},j),{},{name:"",description:"",price:"",photo:"",stock:"",loading:!1,createdProduct:e.name})),console.log(j))}))},w=function(e){return function(t){var c="photo"===e?t.target.files[0]:t.target.value;y.set(e,c),u(Object(h.a)(Object(h.a)({},j),{},Object(f.a)({},e,c)))}};return Object(d.jsxs)(b,{title:"Add a product here",description:"Welcome to product creation section",className:"container bg-info p-4",children:[Object(d.jsx)(a.b,{to:"/admin/dashboard",className:"btn btn-md btn-dark mb-3",children:"Admin Home"}),Object(d.jsx)("div",{className:"row bg-dark text-white rounded",children:Object(d.jsxs)("div",{className:"col-md-8 offset-md-2",children:[Object(d.jsx)("div",{className:"alert alert-success mt-3",style:{display:v?"":"none"},children:Object(d.jsxs)("h4",{children:[v," created succesfully"]})}),Object(d.jsx)("div",{className:"alert alert-success mt-3",style:{display:N?"":"none"},children:Object(d.jsxs)("h4",{children:["Failed with error: ",N]})}),Object(d.jsxs)("form",{children:[Object(d.jsx)("span",{children:"Post photo"}),Object(d.jsx)("div",{className:"mb-3",children:Object(d.jsx)("label",{className:"btn btn-block btn-success",children:Object(d.jsx)("input",{onChange:w("photo"),type:"file",name:"photo",accept:"image",placeholder:"choose a file"})})}),Object(d.jsx)("div",{className:"mb-3",children:Object(d.jsx)("input",{onChange:w("name"),name:"photo",className:"form-control",placeholder:"Name",value:m})}),Object(d.jsx)("div",{className:"mb-3",children:Object(d.jsx)("textarea",{onChange:w("description"),name:"photo",className:"form-control",placeholder:"Description",value:O})}),Object(d.jsx)("div",{className:"mb-3",children:Object(d.jsx)("input",{onChange:w("price"),type:"number",className:"form-control",placeholder:"Price",value:x})}),Object(d.jsx)("div",{className:"mb-3",children:Object(d.jsxs)("select",{onChange:w("category"),className:"form-control",placeholder:"Category",children:[Object(d.jsx)("option",{children:"Select"}),g&&g.map((function(e,t){return Object(d.jsx)("option",{value:e._id,children:e.name},t)}))]})}),Object(d.jsx)("div",{className:"mb-3",children:Object(d.jsx)("input",{onChange:w("stock"),type:"number",className:"form-control",placeholder:"Quantity",value:p})}),Object(d.jsx)("button",{type:"submit",onClick:k,className:"btn btn-outline-success mb-3",children:"Create Product"})]})]})})]})},P=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),c=t[0],s=t[1],r=l.isAuthenticated(),j=r.user,u=r.token,h=function(){fetch("".concat(i,"/products"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)})).then((function(e){e.error?console.log(e.error):s(e)})).catch((function(e){console.log(e)}))};Object(n.useEffect)((function(){h()}),[]);var m=function(e){(function(e,t,c){return fetch("".concat(i,"/product/").concat(e,"/").concat(c),{method:"DELETE",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(e,u,j._id).then((function(e){e.error?console.log(e):h()}))};return Object(d.jsxs)(b,{title:"Welcome admin",description:"Manage products here",children:[Object(d.jsx)("h2",{className:"mb-4",children:"All products:"}),Object(d.jsx)(a.b,{className:"btn btn-info",to:"/admin/dashboard",children:Object(d.jsx)("span",{className:"",children:"Admin Home"})}),Object(d.jsx)("div",{className:"row",children:Object(d.jsxs)("div",{className:"col-12",children:[Object(d.jsxs)("h2",{className:"text-center text-white my-3",children:["Total ",c.length," products"]}),c.map((function(e,t){return Object(d.jsxs)("div",{className:"row  text-center mb-2 ",children:[Object(d.jsx)("div",{className:"col-4",children:Object(d.jsx)("h3",{className:"text-white text-left",children:e.name})}),Object(d.jsx)("div",{className:"col-4",children:Object(d.jsx)(a.b,{className:"btn btn-success",to:"/admin/product/update/".concat(e._id),children:Object(d.jsx)("span",{className:"",children:"Update"})})}),Object(d.jsx)("div",{className:"col-4",children:Object(d.jsx)("button",{onClick:function(){m(e._id)},className:"btn btn-danger",children:"Delete"})})]},t)}))]})})]})},I=function(){var e=l.isAuthenticated(),t=e.user,c=e.token,s=Object(r.g)().productId,j=Object(n.useState)({name:"",description:"",price:"",stock:"",photo:"",categories:[],category:"",loading:!1,error:"",createdProduct:"",getRedirect:!1,formData:""}),u=Object(o.a)(j,2),m=u[0],O=u[1],x=m.name,p=m.description,g=m.price,N=m.stock,v=m.categories,y=(m.category,m.loading,m.error),k=m.createdProduct,w=(m.getRedirect,m.formData),A=function(){(function(e){return fetch("".concat(i,"/product/").concat(e),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(s).then((function(e){console.log(e),e.error?O(Object(h.a)(Object(h.a)({},m),{},{error:e.error})):(C(),O(Object(h.a)(Object(h.a)({},m),{},{name:e.name,description:e.description,price:e.price,category:e.category._id,stock:e.stock,formData:new FormData})))}))},C=function(){S().then((function(e){e.error?O(Object(h.a)(Object(h.a)({},m),{},{error:e.error})):(console.log(e),O({categories:e,formData:new FormData}))}))};Object(n.useEffect)((function(){A()}),[]);var T=function(e){e.preventDefault(),O(Object(h.a)(Object(h.a)({},m),{},{error:"",loading:!0})),function(e,t,c,n){return fetch("".concat(i,"/product/").concat(e,"/").concat(t),{method:"PUT",headers:{Accept:"application/json",Authorization:"Bearer ".concat(c)},body:n}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(s,t._id,c,w).then((function(e){e.error?O(Object(h.a)(Object(h.a)({},m),{},{error:e.error})):(O(Object(h.a)(Object(h.a)({},m),{},{name:"",description:"",price:"",photo:"",stock:"",loading:!1,createdProduct:e.name})),console.log(m))}))},E=function(e){return function(t){var c="photo"===e?t.target.files[0]:t.target.value;w.set(e,c),O(Object(h.a)(Object(h.a)({},m),{},Object(f.a)({},e,c)))}};return Object(d.jsxs)(b,{title:"Add a product here",description:"Welcome to product creation section",className:"container bg-info p-4",children:[Object(d.jsx)(a.b,{to:"/admin/dashboard",className:"btn btn-md btn-dark mb-3",children:"Admin Home"}),Object(d.jsx)("div",{className:"row bg-dark text-white rounded",children:Object(d.jsxs)("div",{className:"col-md-8 offset-md-2",children:[Object(d.jsx)("div",{className:"alert alert-success mt-3",style:{display:k?"":"none"},children:Object(d.jsxs)("h4",{children:[k," updated succesfully"]})}),Object(d.jsx)("div",{className:"alert alert-success mt-3",style:{display:y?"":"none"},children:Object(d.jsxs)("h4",{children:["Failed with error: ",y]})}),Object(d.jsxs)("form",{children:[Object(d.jsx)("span",{children:"Post photo"}),Object(d.jsx)("div",{className:"mb-3",children:Object(d.jsx)("label",{className:"btn btn-block btn-success",children:Object(d.jsx)("input",{onChange:E("photo"),type:"file",name:"photo",accept:"image",placeholder:"choose a file"})})}),Object(d.jsx)("div",{className:"mb-3",children:Object(d.jsx)("input",{onChange:E("name"),name:"photo",className:"form-control",placeholder:"Name",value:x})}),Object(d.jsx)("div",{className:"mb-3",children:Object(d.jsx)("textarea",{onChange:E("description"),name:"photo",className:"form-control",placeholder:"Description",value:p})}),Object(d.jsx)("div",{className:"mb-3",children:Object(d.jsx)("input",{onChange:E("price"),type:"number",className:"form-control",placeholder:"Price",value:g})}),Object(d.jsx)("div",{className:"mb-3",children:Object(d.jsxs)("select",{onChange:E("category"),className:"form-control",placeholder:"Category",children:[Object(d.jsx)("option",{children:"Select"}),v&&v.map((function(e,t){return Object(d.jsx)("option",{value:e._id,children:e.name},t)}))]})}),Object(d.jsx)("div",{className:"mb-3",children:Object(d.jsx)("input",{onChange:E("stock"),type:"number",className:"form-control",placeholder:"Quantity",value:N})}),Object(d.jsx)("button",{type:"submit",onClick:T,className:"btn btn-outline-success mb-3",children:"Update Product"})]})]})})]})},D=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),c=t[0],s=t[1],j=Object(n.useState)(!1),u=Object(o.a)(j,2),h=u[0],m=u[1],O=Object(n.useState)(!1),x=Object(o.a)(O,2),p=x[0],f=x[1],g=Object(r.g)().categoryId,N=l.isAuthenticated(),v=N.user,y=N.token,k=function(e){m(""),s(e.target.value),console.log(c)},w=function(e){e.preventDefault(),m(""),f(!1),function(e,t,c,n){return fetch("".concat(i,"/category/").concat(e,"/").concat(t),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify(n)}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(g,v._id,y,{name:c}).then((function(e){e.error?m(e.error):(m(""),f(!0),s(""))})).catch((function(e){return console.log(e)}))},A=function(){(function(e){return fetch("".concat(i,"/category/").concat(e),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))})(g).then((function(e){s(e.name)})).catch((function(e){console.log(e)}))};Object(n.useEffect)((function(){A()}),[]);return Object(d.jsx)(b,{title:"Create category here",description:"Add new category for t-shirts",className:"container bg-info p-4",children:Object(d.jsx)("div",{className:"row bg-white rounded",children:Object(d.jsxs)("div",{className:"col-md-8 offset-md-2",children:[function(){if(p)return Object(d.jsx)("h4",{className:"text-success",children:"Category created succesfully"})}(),function(){if(h)return Object(d.jsx)("h4",{className:"text-warning",children:h})}(),Object(d.jsx)("form",{children:Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{className:"lead",children:"Category Name:"}),Object(d.jsx)("input",{value:c,onChange:k,type:"text",autoFocus:!0,required:!0,className:"form-control my-3",placeholder:"For Ex. Summer"}),Object(d.jsx)("button",{className:"btn btn-outline-info text-dark",onClick:w,children:"Update Category"})]})}),Object(d.jsx)("div",{className:"mt-5",children:Object(d.jsx)(a.b,{to:"/admin/dashboard",className:"btn btn-sm btn-success mb-3",children:"Admin Home"})}),Object(d.jsx)("p",{children:c})]})})})},_=c(24),F=c.n(_),B=function(e){var t=e.products,c=e.setReload,s=void 0===c?function(e){return e}:c,a=e.reload,r=void 0===a?void 0:a,j=Object(n.useState)({loading:!1,success:!1,clientToken:null,error:"",instance:""}),u=Object(o.a)(j,2),b=u[0],m=u[1],O=l.isAuthenticated().user._id,x=l.isAuthenticated().token,p=function(){(function(e,t){return console.log("userId ---"+e+"Token--"+t),fetch("".concat(i,"payment/gettoken/").concat(e),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return console.log(e),e.json()})).catch((function(e){console.log(e)}))})(O,x).then((function(e){if(console.log("information",e),e)m(Object(h.a)(Object(h.a)({},e),{},{error:e.error}));else{var t=e.clientToken;m({clientToken:t})}})).catch((function(e){console.log(e)}))};Object(n.useEffect)((function(){p()}),[]);var f=function(){m({loading:!0});b.instance.requestPaymentMethod().then((function(e){var c={paymentMethodNonce:e.nonce,amount:g()};(function(e,t,c){return fetch("".concat(i,"/payment/braintree/").concat(e),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(c)}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))})(O,x,c).then((function(e){m(Object(h.a)(Object(h.a)({},b),{},{success:e.success,loading:!1})),console.log("PAYMENT SUCCESS");var c,n={products:t,transaction_id:e.transaction.id,amount:e.transaction.amount};!function(e,t,c){fetch("".concat(i,"/order/create/").concat(e),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({order:c})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(O,x,n),c=function(){console.log("did we got a crash?")},void 0!==typeof window&&(localStorage.removeItem("cart"),localStorage.setItem("cart",JSON.stringify([])),c()),s(!r)})).catch((function(e){m({loading:!1,success:!1}),console.log("PAYMENT FAILED",e)}))}))},g=function(){var e=0;return t.map((function(t){e+=t.price})),e};return Object(d.jsxs)("div",{children:[Object(d.jsxs)("h3",{children:["Your bill is ",g()]}),Object(d.jsx)("div",{children:null!==b.clientToken&&t.length>0?Object(d.jsxs)("div",{children:[Object(d.jsx)(F.a,{options:{authorization:b.clientToken},onInstance:function(e){return b.instance=e}}),Object(d.jsx)("button",{className:"btn btn-block btn-success",onClick:function(){f()},children:"Buy"})]}):Object(d.jsx)("h3",{children:"Please login or add some items in cart"})})]})},J=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),c=t[0],s=t[1],a=Object(n.useState)(!1),r=Object(o.a)(a,2),i=r[0],l=r[1];Object(n.useEffect)((function(){s(function(){if(void 0!==typeof window&&localStorage.getItem("cart"))return JSON.parse(localStorage.getItem("cart"))}())}),[i]);return Object(d.jsx)(b,{title:"Cart",description:"Check your items and pay.",children:Object(d.jsxs)("div",{className:"row text-center",children:[Object(d.jsx)("div",{className:"col-6",children:c.length>0?Object(d.jsxs)("div",{children:[Object(d.jsx)("h2",{children:"This section loads all the products"}),c.map((function(e,t){return Object(d.jsx)(x,{product:e,isAddToCart:!1,isRemoveFromCart:!0,setReload:l,reload:i},t)}))]}):Object(d.jsx)("h3",{children:"No products in cart"})}),Object(d.jsx)("div",{className:"col-6",children:Object(d.jsx)(B,{products:c,setReload:l})})]})})},R=function(){var e=l.isAuthenticated(),t=e.user,c=e.token,s=Object(n.useState)([]),a=Object(o.a)(s,2),r=a[0],j=a[1],u=Object(n.useState)(""),h=Object(o.a)(u,2),m=(h[0],h[1]),O=function(){(function(e,t){return fetch("".concat(i,"/order/all/").concat(e),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))})(t._id,c).then((function(e){e.error?(m(e.error),console.log(e.error)):(console.log(e),j(e))})).catch((function(e){return console.log(e)}))};Object(n.useEffect)((function(){O()}),[]);var x=function(e){(function(e,t,c){return fetch("".concat(i,"/order/all/delete/").concat(c._id,"/").concat(e),{method:"DELETE",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))})(t._id,c,e).then((function(e){e.error?(m(e.error),console.log(e.error)):(console.log(e),O())})).catch((function(e){return console.log(e)}))},p=function(e){return Object(d.jsxs)("div",{className:"card text-dark",children:[Object(d.jsx)("div",{className:"card-header",children:"User Details"}),Object(d.jsxs)("ul",{className:"list-group",children:[Object(d.jsxs)("li",{className:"list-group-item",children:["User Name: ",e.user.name]}),Object(d.jsxs)("li",{className:"list-group-item",children:["User ID: ",e.user._id]})]})]})},f=function(e){return Object(d.jsxs)("div",{className:"card text-dark mt-3",children:[Object(d.jsx)("div",{className:"card-header",children:"Payment Details"}),Object(d.jsxs)("ul",{className:"list-group",children:[Object(d.jsxs)("li",{className:"list-group-item",children:["Total Bill: ",e.amount]}),Object(d.jsxs)("li",{className:"list-group-item",children:["Transaction ID: ",e.transaction_id]})]})]})},g=function(e){return Object(d.jsxs)("div",{className:"row mt-3",children:[Object(d.jsx)("div",{className:"col-3",children:Object(d.jsxs)("button",{className:"Received"===e.status?"disabled btn btn-block bg-warning":"btn btn-block bg-danger",children:["[Status: ",e.status,"]"]})}),Object(d.jsx)("div",{className:"col-3"}),Object(d.jsx)("div",{className:"col-3"}),Object(d.jsx)("div",{className:"col-3",children:Object(d.jsx)("button",{onClick:function(){return x(e)},className:"btn btn-block btn-danger",children:"Cancel This order"})})]})};return Object(d.jsx)(b,{title:"All Orders",description:"This is where admin can manage and check all orders",children:r.map((function(e,t){return Object(d.jsxs)("div",{className:"card m-3 text-dark",children:[Object(d.jsxs)("div",{className:"card-header",children:["Order Id : ",e._id]}),Object(d.jsxs)("div",{className:"card-body",children:[Object(d.jsxs)("div",{className:"row",children:[Object(d.jsx)("div",{className:"col-6",children:Object(d.jsxs)("div",{className:"card text-dark",children:[Object(d.jsx)("div",{className:"card-header",children:"Purchases"}),e.products.map((function(e,t){return Object(d.jsx)("div",{children:Object(d.jsx)("ul",{className:"list-group",children:Object(d.jsx)("li",{className:"list-group-item",children:e.name})})},t)}))]})}),Object(d.jsxs)("div",{className:"col-6",children:[p(e),f(e)]})]}),g(e)]})]},t)}))})},U=function(){return Object(d.jsx)(a.a,{children:Object(d.jsxs)(r.d,{children:[Object(d.jsx)(r.b,{path:"/",exact:!0,component:p}),Object(d.jsx)(r.b,{path:"/signup",exact:!0,component:g}),Object(d.jsx)(r.b,{path:"/signin",exact:!0,component:N}),Object(d.jsx)(k,{path:"/user/dashboard",exact:!0,component:w}),Object(d.jsx)(y,{path:"/admin/dashboard",exact:!0,component:A}),Object(d.jsx)(y,{path:"/admin/create/category",exact:!0,component:C}),Object(d.jsx)(y,{path:"/admin/categories",exact:!0,component:T}),Object(d.jsx)(y,{path:"/admin/create/product",exact:!0,component:E}),Object(d.jsx)(y,{path:"/admin/products",exact:!0,component:P}),Object(d.jsx)(y,{path:"/admin/product/update/:productId",exact:!0,component:I}),Object(d.jsx)(y,{path:"/admin/category/update/:categoryId",exact:!0,component:D}),Object(d.jsx)(y,{path:"/admin/orders",exact:!0,component:R}),Object(d.jsx)(r.b,{path:"/cart",exact:!0,component:J})]})})},z=c(17);c.n(z).a.render(Object(d.jsx)(U,{}),document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.770fc7d8.chunk.js.map